{% extends "admin_base.html" %}

{% block content %}
<section class="section">
    <h2>{{ 'Add' if action == 'add' else 'Edit' }} User</h2>

    <form method="post">
        <label>Full Name:<br>
            <input type="text" name="full_name" value="{{ user.get_full_name or '' }}" required>
        </label><br><br>

        <label>Email:<br>
            <input type="email" name="email" value="{{ user.email or '' }}" required>
        </label><br><br>

        <label>Role:<br>
            <select name="role">
                <option value="Administrator" {% if user.role == 'Administrator' %}selected{% endif %}>Administrator</option>
                <option value="Manager" {% if user.role == 'Manager' %}selected{% endif %}>Manager</option>
                <option value="Candidate" {% if user.role == 'Candidate' %}selected{% endif %}>Candidate</option>
            </select>
        </label><br><br>

        <label>
            <input type="checkbox" name="is_active" {% if user.is_active %}checked{% endif %}>
            Active
        </label><br><br>

        <button class="btn btn-secondary" type="submit">
            {{ 'Add User' if action == 'add' else 'Save Changes' }}
        </button>

        {% if action == 'edit' %}
        <form method="post" action="{{ url_for('delete_user', user_id=user.id) }}" style="display:inline;">
            <button class="btn btn-secondary" onclick="return confirm('Are you sure you want to delete this user?');">Delete</button>
        </form>
        {% endif %}

        <a href="{{ url_for('admin_overview') }}" class="btn btn-secondary">Cancel</a>
    </form>
</section>
{% endblock %}
